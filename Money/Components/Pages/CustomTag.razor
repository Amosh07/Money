@page "/customTag"
@using Money.Components.Dialog
@using Money.Components.Layout
@if(Tags == null)
{
    <Loader/>
}
else
{
    <MudPaper Class="p-4">
        <MudText Typo="Typo.h5" GutterBottom>Manage Tags</MudText>
        <MudButton Variant="Variant.Filled" Color="Color.Secondary" DropShadow="false" class="btn btn--md" OnClick="OpenTagRegister" Disabled="IsCreatedModal" ButtonType="ButtonType.Submit">Add Tag</MudButton>
        
        <div class="table-responsive">
            <table class="table country-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>TagName</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Tags)
                    {
                        <tr>
                            <td>@(Tags.IndexOf(item) + 1).</td>
                            <td>
                                <div class="d-flex align-items-center gap-3">
                                    <Avatar Name="@item.TagName"/>
                                    @item.TagName
                                </div>
                            </td>
                            <td>
                                <ActivationStatus IsActive="@item.IsActive" />
                            </td>
                            <td>
                                <div class="action">
                                    <MudTooltip Text="Edit" Color="Color.Primary" Arrow="true">
                                        <MudImage Src="images/icons/edit.svg" Alt="Edit Icon" Height="18" Width="18" @onclick="() => OpenUpdateTagModal(item.Id)" />
                                    </MudTooltip>
                                    <MudTooltip Text="@(item.IsActive ? "Deactivate" : "Activate")" Color="Color.Primary" Arrow="true">
                                        <MudImage Src="@(item.IsActive ? "images/icons/delete.svg" : "images/icons/document.svg")" Alt="Bin Icon" Height="18" Width="18"/>
                                    </MudTooltip>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </MudPaper>
}
@if (IsCreatedModal)
{
    <ModalLayout Module="Tags"
                 Title="Custom Tag"
                 Description="Add a new custom tag."
                 SubmitColor="Color.Primary"
                 Size="modal-lg"
                 OnSave="AddRegisterTag"
                 CancelLabel="Discard"
                 SubmitLabel="Save"
                 IsDisabled="IsCreateButtonDisabled"
                 IsVisible="@IsCreatedModal"
                 IsVisibleChanged="@((bool value) => IsCreatedModal = value)">
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField Label="Tag Name" 
                        @bind-Value="CreatedTagDto.TagName"
                        Required="true" 
                        Variant="Variant.Outlined"/>
                </MudItem>
            </MudGrid>
     </ModalLayout>
}